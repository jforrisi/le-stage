{% extends 'clientes/base.html' %}
{% load static %}

{% block title %}{{ titulo }} - FIT{% endblock %}

{% block content %}
<div class="page-header">
    <h2>{{ titulo }}</h2>
    <a href="{% url 'gerencia_le_stage:control_produccion_piezas_corte' %}" class="btn btn-secondary">Volver a Lista</a>
</div>

<div class="detail-container">
    <!-- Datos Básicos -->
    <div class="detail-section">
        <h3>Datos Básicos</h3>
        <div class="detail-grid">
            <div class="detail-item">
                <label>ID:</label>
                <span>{{ pieza.id }}</span>
            </div>
            <div class="detail-item">
                <label>Nombre Piedra:</label>
                <span>{{ pieza.nombre_piedra|default:"-" }}</span>
            </div>
            <div class="detail-item">
                <label>Número:</label>
                <span>{{ pieza.numero|default:"-" }}</span>
            </div>
        </div>
    </div>
    
    <!-- Datos de Minería -->
    <div class="detail-section">
        <h3>Datos de Minería</h3>
        <div class="detail-grid">
            <div class="detail-item">
                <label>Fecha Extracción:</label>
                <span>{{ pieza.fecha_extraccion|date:"d/m/Y"|default:"-" }}</span>
            </div>
            <div class="detail-item">
                <label>Equipo Minero:</label>
                <span>{{ pieza.equipo_minero|default:"-" }}</span>
            </div>
            <div class="detail-item">
                <label>Equipo de Corte:</label>
                <span>{{ pieza.equipo_corte|default:"-" }}</span>
            </div>
            <div class="detail-item">
                <label>Kilos en Cantera:</label>
                <span>{{ pieza.kilos_en_cantera|floatformat:2 }}</span>
            </div>
            <div class="detail-item">
                <label>Valuación Cantera:</label>
                <span>${{ pieza.valuacion_cantera|floatformat:2 }}</span>
            </div>
            <div class="detail-item">
                <label>% de Valuación para Equipo de Corte:</label>
                <span>{{ pieza.porcentaje_valuacion_corte|floatformat:2 }}%</span>
            </div>
            <div class="detail-item">
                <label>Ganancia Equipo de Corte:</label>
                <span><strong>${{ pieza.ganancia_equipo_corte|floatformat:2 }}</strong></span>
            </div>
        </div>
    </div>
    
    <!-- Datos de Industria -->
    <div class="detail-section">
        <h3>Datos de Industria</h3>
        <div class="detail-grid">
            <div class="detail-item">
                <label>Fecha Industria:</label>
                <span>{{ pieza.fecha_industria|date:"d/m/Y"|default:"-" }}</span>
            </div>
            <div class="detail-item">
                <label>Kilos en Recepción Industria:</label>
                <span>{{ pieza.kilos_recepcion_industria|floatformat:2 }}</span>
            </div>
            <div class="detail-item">
                <label>Tipo de Piedra:</label>
                <span>{{ pieza.get_tipo_piedra_display|default:"-" }}</span>
            </div>
            <div class="detail-item">
                <label>Tipos de Pulido Piezas:</label>
                <span>{{ pieza.tipo_proceso|default:"-" }}</span>
            </div>
            <div class="detail-item">
                <label>Kilos después del Tallado:</label>
                <span>{{ pieza.kilos_despues_tallado|floatformat:2 }}</span>
            </div>
            <div class="detail-item">
                <label>Precio por Kilo de Tallado:</label>
                <span>${{ pieza.precio_por_kilo_tallado|floatformat:2 }}</span>
            </div>
            <div class="detail-item">
                <label>Pulido por Kilo:</label>
                <span>${{ pieza.pulido_por_kilo|floatformat:2 }}</span>
            </div>
        </div>
    </div>
    
    <!-- Costos Calculados -->
    <div class="detail-section">
        <h3>Costos Calculados</h3>
        <div class="detail-grid">
            <div class="detail-item">
                <label>Costo Tallado:</label>
                <span><strong>${{ costo_tallado|floatformat:2 }}</strong></span>
                <small class="form-text text-muted">(Kilos después del Tallado × Precio por Kilo de Tallado)</small>
            </div>
            <div class="detail-item">
                <label>Costo Pulido:</label>
                <span><strong>${{ costo_pulido|floatformat:2 }}</strong></span>
                <small class="form-text text-muted">(Pulido por Kilo × Kilos después del Tallado)</small>
            </div>
            <div class="detail-item">
                <label>Extra Carlos:</label>
                <span><strong>${{ extra_carlos_decimal|floatformat:2 }}</strong></span>
                <small class="form-text text-muted">({{ pieza.extra_carlos|default:"Sin valor" }})</small>
            </div>
        </div>
    </div>
    
    <!-- Costo Total - Destacado -->
    <div class="detail-section" style="background-color: #f8f9fa; border: 3px solid #007bff; border-radius: 8px; padding: 20px; margin-top: 30px;">
        <h3 style="color: #007bff; margin-bottom: 15px;">Costo Total de Industrialización</h3>
        <div style="text-align: center; padding: 20px;">
            <div style="font-size: 2.5em; font-weight: bold; color: #007bff; margin-bottom: 10px;">
                ${{ costo_total|floatformat:2 }}
            </div>
            <div style="color: #6c757d; font-size: 0.9em;">
                (Costo Tallado + Costo Pulido + Extra Carlos)
            </div>
        </div>
    </div>
    
    <!-- Auditoría -->
    <div class="detail-section">
        <h3>Auditoría</h3>
        <div class="detail-grid">
            <div class="detail-item">
                <label>Fecha de Creación:</label>
                <span>{{ pieza.fecha_creacion|date:"d/m/Y H:i" }}</span>
            </div>
            <div class="detail-item">
                <label>Fecha de Modificación:</label>
                <span>{{ pieza.fecha_modificacion|date:"d/m/Y H:i" }}</span>
            </div>
        </div>
    </div>
</div>
{% endblock %}

